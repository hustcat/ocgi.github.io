<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Overview</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=https://ocgi.github.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://ocgi.github.io/plugins/themify-icons/themify-icons.css><link rel=icon href=https://ocgi.github.io/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#0052d9;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Lato}</style><link href=https://ocgi.github.io/css/style.min.css rel=stylesheet media=screen><script src=https://ocgi.github.io/plugins/jquery/jquery-1.12.4.js></script><script src=https://ocgi.github.io/plugins/jquery/jquery-ui.js></script><script src=https://ocgi.github.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://ocgi.github.io/plugins/match-height/jquery.matchHeight-min.js></script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/>OCGI</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=https://ocgi.github.io/en/docs/>Docs</a></li><li class=nav-item><a class="nav-link text-dark" href=https://github.com/ocgi>Github</a></li></ul><select class="lang-list dark" id=select-language onchange="location=this.value"><option id=en value=https://ocgi.github.io/en/docs/overview/ selected>En</option></select></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><ul class=list-styled><a class=back-btn href=/></a><li data-nav-id=https://ocgi.github.io/en/ title=Ens class=sidelist><a href=https://ocgi.github.io/en/>Ens</a><ul><li data-nav-id=https://ocgi.github.io/en/docs/ title="OCGI Documentation" class=sidelist><a href=https://ocgi.github.io/en/docs/>OCGI Documentation</a><ul><li data-nav-id=https://ocgi.github.io/en/docs/overview/ title=Overview class="sidelist
active"><a href=https://ocgi.github.io/en/docs/overview/>Overview</a></li><li data-nav-id=https://ocgi.github.io/en/docs/installation/ title=Installation class=sidelist><a href=https://ocgi.github.io/en/docs/installation/>Installation</a></li><li data-nav-id=https://ocgi.github.io/en/docs/getting-started/ title="Getting Started" class=sidelist><a href=https://ocgi.github.io/en/docs/getting-started/>Getting Started</a><ul><li data-nav-id=https://ocgi.github.io/en/docs/getting-started/gameserver/ title="Create a GameServer" class=sidelist><a href=https://ocgi.github.io/en/docs/getting-started/gameserver/>Create a GameServer</a></li><li data-nav-id=https://ocgi.github.io/en/docs/getting-started/squad/ title="Create a Squad" class=sidelist><a href=https://ocgi.github.io/en/docs/getting-started/squad/>Create a Squad</a></li><li data-nav-id=https://ocgi.github.io/en/docs/getting-started/gpa/ title="Create a GeneralPodAutoscaler" class=sidelist><a href=https://ocgi.github.io/en/docs/getting-started/gpa/>Create a GeneralPodAutoscaler</a></li></ul></li><li data-nav-id=https://ocgi.github.io/en/docs/guides/ title=Guides class=sidelist><a href=https://ocgi.github.io/en/docs/guides/>Guides</a><ul><li data-nav-id=https://ocgi.github.io/en/docs/guides/squad_details/ title="Squad Introduction" class=sidelist><a href=https://ocgi.github.io/en/docs/guides/squad_details/>Squad Introduction</a></li><li data-nav-id=https://ocgi.github.io/en/docs/guides/gpa/ title="GeneralPodAutoscaler Introduction" class=sidelist><a href=https://ocgi.github.io/en/docs/guides/gpa/>GeneralPodAutoscaler Introduction</a></li><li data-nav-id=https://ocgi.github.io/en/docs/guides/autoscaling_flow/ title="GameServer autoscaling workflow" class=sidelist><a href=https://ocgi.github.io/en/docs/guides/autoscaling_flow/>GameServer autoscaling workflow</a></li><li data-nav-id=https://ocgi.github.io/en/docs/guides/squad-scaledown-priority/ title="GamerServer scaling down priority" class=sidelist><a href=https://ocgi.github.io/en/docs/guides/squad-scaledown-priority/>GamerServer scaling down priority</a></li></ul></li><li data-nav-id=https://ocgi.github.io/en/docs/reference/ title=Reference class=sidelist><a href=https://ocgi.github.io/en/docs/reference/>Reference</a><ul><li data-nav-id=https://ocgi.github.io/en/docs/reference/sdk/ title="Carrier SDK" class=sidelist><a href=https://ocgi.github.io/en/docs/reference/sdk/>Carrier SDK</a></li><li data-nav-id=https://ocgi.github.io/en/docs/reference/gpa_webhook/ title="GPA Webhook example" class=sidelist><a href=https://ocgi.github.io/en/docs/reference/gpa_webhook/>GPA Webhook example</a></li></ul></li><li data-nav-id=https://ocgi.github.io/en/docs/examples/ title=Examples class=sidelist><a href=https://ocgi.github.io/en/docs/examples/>Examples</a></li><li data-nav-id=https://ocgi.github.io/en/docs/faq/ title="Frequently Asked Questions" class=sidelist><a href=https://ocgi.github.io/en/docs/faq/>Frequently Asked Questions</a></li></ul></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h1 class=mb-5>Overview</h1><div class=content><h2 id=introduction>Introduction</h2><p>OCGI (Open Cloud-native Game-application Initiative) is a opensource project created by <a href=https://game.qq.com>Tencent Games</a> Computing Resources Team, which mainly solves the problems when running and scaling game server on Kubernetes cluster.</p><p>Generally speaking, the online multiplayer games such as competitive <a href=https://en.wikipedia.org/wiki/First-person_shooter>FPS</a>s and <a href=https://en.wikipedia.org/wiki/Multiplayer_online_battle_arena>MOBA</a>s, require a <a href=https://en.wikipedia.org/wiki/Game_server#Dedicated_server>dedicated game server(DS)</a> which simulating game worlds, and players connect to the server with separate client programs, then playing within it.</p><p>Dedicated game servers are stateful applications that retain the full game simulation in memory. But unlike other stateful applications, such as databases, they have a short lifetime. Rather than running for months or years, a dedicated game server process will exit when a game is over, which usually lasts a few minutes or hours.</p><p>The Kubernetes <a href=https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/>Statefulset</a> workload does not manage such applications well. So we developed this project to make game servers runing and scaling better on Kubernetes.</p><h2 id=ocgi-overview>OCGI Overview</h2><p>OCGI consists of several Kubernetes controllers for game server application management.</p><ul><li><p>GameServer</p><p>GameServer represents a single game server. It is based on K8s <a href=https://kubernetes.io/docs/concepts/workloads/pods/>Pod</a> implementation and is a further abstraction of the Pod.</p></li><li><p>Squad</p><p>Squad represents a group of game servers (GameServer), they have the same resource configuration, and the controller maintains the specified number of replicas of the group of GameServers. It controls the updating and scaling of the group of GameServers.</p><p><code>GameServer</code> and <code>Squad</code> are managed by the <a href=https://github.com/ocgi/carrier>Carrier</a> controller. Carrier communicates with the game server through the SDK, and game server can notify the Carrier when no player whthin it, then the Carrier can delete the Pod safely. Conversely, when scaling down the Kubernetes cluster, Carrier can also notify the game server through the SDK, which allows the Carrier to better running and scaling the game server.</p></li><li><p>GeneralPodAutoscaler</p><p><code>GeneralPodAutoscaler</code> is an auto-scaling controller, which dynamically adjusts the number of GameServer replicas of Squad according to the strategy specified by the application.</p></li></ul><p><code>Squad</code> and <code>GeneralPodAutoscaler</code> provide some extension mechanisms. When updating or scaling, GameServer can exit more gracefully, avoiding the impact on game players.</p><h2 id=main-features>Main Features</h2><ul><li><p>Application Interactive Update</p><p>Support application interactive update, delete the replica only after the application confirmed. This is very important for game server, but the Deployment and Statefulset can not support this.</p></li><li><p>In-place Update</p><p>Support in-place update image, and the Pod will not be recreated. The local cache data GameServer can be retained when updating.</p></li><li><p>Multiple Pod Auto-scaling Strategies</p><p>Support multiple modes (resource metrics/custom metrics/timing/events/webhook) Pod auto-scaling strategies. In many cases, the application wants to specify the number of service replicas by itself, which can be achieved through webhooks.</p></li><li><p>Application-defined Scaling-down Order</p><p>Application can define the scaling-down order of replicas. For example, application can choose the game server replica with least user-accessed to delete. This can not only reduce the cost of scaling-down, but also improve the resource utilization.</p></li><li><p>Better Cluster Auto-scaling</p><p>It can be seamlessly integrated with the cluster auto-scaling. Based on the application-confirmed mechanism, can choose any replica to delete after application confirmed when cluster scaling-down.</p></li></ul><h2 id=application-architecture-based-on-ocgi>Application architecture based on OCGI</h2><p><img src=/images/application_archtecture.png alt="Application archtecture"></p><ul><li><p>MatchMaker</p><p>Responsible for matchmaking (developed by the application)</p></li><li><p>Dscenter</p><p>esponsible for Dedicated Server management and allocation (developed by the application)</p></li><li><p>Dedicated Server</p><p>Corresponds to a GameServer, manages multiple ds processes, and reports ds information to <code>Dscenter</code>. <code>Dedicated Server</code> and <code>Carrier-SDK</code> as a whole are deployed in the same K8s Pod</p></li><li><p>Carrier Controller</p><p>Manage a group of GameServers (create, update, delete) and maintain a certain number of replicas of the DS cluster</p></li><li><p>Autoscaler</p><p>Calculate and adjust the number of replicas of the DS cluster according to application metrics, events, time, etc.</p></li></ul></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 2020-11-24</p></p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://ocgi.github.io/en/docs/><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">OCGI Documentation</span></a>
<a class="nav nav-next" href=https://ocgi.github.io/en/docs/installation/><span class="d-none d-md-block">Installation</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">Copyright © 2021 The OCGI Authors</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline></ul></div></div></div></footer><script src=https://ocgi.github.io/js/script.min.js></script></body></html>